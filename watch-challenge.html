<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SV Sprouts | Daily Watch Challenge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <!-- Firebase (compat for simplicity) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-functions-compat.js"></script>

  <!-- Stripe -->
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="challenge-body">
  <header class="nav">
    <div class="nav-left">
      <a class="logo" href="index.html">
        <img class="logo-icon" src="image/sprouts_orange.png" alt="Silicon Valley Sprouts logo" />
        <span class="logo-text">Silicon Valley Sprouts</span>
      </a>
      <nav class="nav-links">
        <a href="curriculum.html">Curriculum</a>
        <a href="watch-challenge.html" class="active">Daily Challenge</a>
        <a href="parent-corner.html">Parent Hub</a>
        <a href="pricing.html">Pricing</a>
      </nav>
    </div>
    <div class="nav-right" id="nav-auth">
      <button class="pill-btn" id="btn-open-signup">Sign Up</button>
    </div>

    <!-- After login -->
    <div class="nav-right hidden" id="nav-user">
      <span id="nav-user-email" class="nav-user-email"></span>
      <button class="pill-btn outline" id="btn-logout">Sign Out</button>
    </div>
  </header>

  <main class="challenge-main">
    <section class="challenge-hero">
      <div class="challenge-hero-card" style="padding: 28px; border-radius: 18px; background: linear-gradient(135deg, #313644, #6f86b6 35%, #0ea5e9 120%); border: 1px solid rgba(255,255,255,0.06); box-shadow: 0 20px 45px rgba(0,0,0,0.22); display: flex; flex-direction: column; gap: 16px; align-items: center;">
        <div style="text-align: center; max-width: 900px; width: 100%;">
          <p class="challenge-kicker" style="color: #ffffff; margin-bottom: 6px;">Watch 1 video a day ¬∑ Build an entrepreneur mindset in 100 days</p>
          <h1 class="challenge-title" style="color: #fff; margin: 0;">Today's Watch Challenge</h1>
          <div class="challenge-tags" style="justify-content: center; margin: 12px 0 16px;">
            <span class="tag tag-blue">GTM</span>
            <span class="tag tag-green">Pricing</span>
            <span class="tag tag-purple">Mindset</span>
          </div>
          <div class="video-embed" style="width: 100%; overflow: hidden; border-radius: 14px; box-shadow: 0 12px 30px rgba(0,0,0,0.35);">
            <iframe width="100%" height="420" src="https://www.youtube.com/embed/0lJKucu6HJc?si=cvJ4N2uEEkxrhK5T" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
          </div>
      <div class="challenge-actions" style="justify-content: center; gap: 14px; margin-top: 10px;">
          <button class="pill-btn filled primary" id="mark-watched">Submit Learning Notes to Mark as Watched</button>
            <a class="pill-btn filled" href="pricing.html" style="background: #f58234; color: #fff; border-color: #f58234;">
              Subscribe to Sprouts Plan for full experience
            </a>
          </div>
          <div class="watch-notes-block">
            <label for="watch-notes">Learning Notes</label>
            <textarea id="watch-notes" rows="3" placeholder="What did you learn or what will you try next?"></textarea>
            <p class="watch-notes-hint">Learning notes are not auto saved.</p>
            <p class="watch-notes-error hidden" id="watch-note-error">Please enter a quick learning note before marking watched.</p>
          </div>
            
    </div>

        <div class="hero-stats" style="width: 100%; display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 14px; align-items: stretch;">
          <div class="stat-card" style="background: #abc2d4; border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 16px; display: flex; justify-content: center; align-items: center;">
            <div class="ring-wrap">
              <svg class="progress-ring" viewBox="0 0 140 140">
                <circle class="ring-bg" cx="70" cy="70" r="60" />
                <circle class="ring-progress" cx="70" cy="70" r="60" />
              </svg>
              <div class="ring-label">
                <div class="ring-day">Day <span id="day-count">12</span></div>
                <div class="ring-total">of 100</div>
              </div>
            </div>
          </div>
          <!-- FEATURE: Combined stats into mini-streaks (level removed) -->
          <div class="stat-card" style="background: #abc2d4; border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 16px;">
            <div class="mini-streaks" style="margin: 0; gap: 12px;">
              <div class="mini-streak">
                <div class="metric-icon">üí†</div>
                <div>
                  <p class="meta-label" style="margin: 0;">XP</p>
                  <p class="metric-value" id="xp-label">250 / 400</p>
                </div>
              </div>
              <div class="mini-streak">
                <div class="metric-icon flame">üî•</div>
                <div>
                  <p class="metric-label">Current Streak</p>
                  <p class="metric-value" id="current-streak">6</p>
                </div>
              </div>
              <div class="mini-streak">
                <div class="metric-icon trophy">üèÜ</div>
                <div>
                  <p class="metric-label">Highest Streak</p>
                  <p class="metric-value" id="highest-streak">10</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
                          <button class="pill-btn outline go-today-btn" type="button" id="go-today-btn">Go to Today's Video</button>

    </section>

    <section class="streak-section">
      <div class="section-heading">
        <h2>Watch Pattern</h2>
        <p>Keep the flame alive. See your streak and habits in one glance.</p>
      </div>
      <div class="streak-grid">
        <div class="heatmap-card">
          <div class="heatmap-head">
            <p>Your 100 days of curiosity in action</p>
            <div class="legend">
              <span class="legend-dot light"></span> Watched
              <span class="legend-dot medium"></span> Double watch
              <span class="legend-dot dark"></span> Triple+
              <span class="legend-dot missed"></span> Missed
            </div>
          </div>
          <div class="heatmap-grid" id="heatmap-grid"></div>
        </div>
      </div>
    </section>

    <section class="video-list-section">
      <div class="section-heading">
        <h2>Past & Due Videos</h2>
        <p>Everything up to today‚Äîcatch up or rewatch to keep your streak strong.</p>
      </div>
      <div class="video-list-grid" id="video-list"></div>
    </section>
  </main>

  <div class="sparkle-burst" id="sparkle-burst">‚ú®</div>

  <!-- AUTH MODAL -->
  <div class="modal-backdrop hidden" id="auth-modal-backdrop">
    <div class="modal" id="auth-modal">
      <button class="modal-close" id="auth-modal-close">‚úï</button>
      <div class="auth-grid">
        <div class="auth-left">
          <div class="modal-tabs">
            <button class="modal-tab active" id="tab-signup">Sign Up</button>
            <button class="modal-tab" id="tab-login">Sign In</button>
          </div>

          <form id="form-signup" class="auth-form">
            <div class="auth-hero-icon"><img src="image/sprouts_orange.png" alt="Sprouts logo" style="width: 42px; height: 42px;"></div>
            <h3 class="auth-title">Start Your Journey</h3>
            <p class="auth-subtitle">Building next generation of builders and leaders.</p>
            <label>
              Email address
              <input type="email" id="signup-email" placeholder="dad@example.com" required />
            </label>
            <label>
              Password
              <input type="password" id="signup-password" minlength="6" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
            </label>
            <button class="pill-btn filled full-width" type="submit">Create Account</button>
            <p class="auth-hint">
              Already have an account? <span class="auth-switch" id="switch-to-login">Sign in</span>
            </p>
          </form>

          <form id="form-login" class="auth-form hidden">
            <div class="auth-hero-icon"><img src="image/sprouts_orange.png" alt="Sprouts logo" style="width: 42px; height: 42px;"></div>
            <h3 class="auth-title">Welcome Back</h3>
            <p class="auth-subtitle">Continue where you left off.</p>
            <label>
              Email address
              <input type="email" id="login-email" placeholder="dad@example.com" required />
            </label>
            <label class="password-row">
              <span>Password</span>
              <a class="forgot-link" href="#">Forgot password?</a>
              <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required />
            </label>
            <button class="pill-btn filled full-width" type="submit">Sign In</button>
            <p class="auth-hint">
              Don‚Äôt have an account? <span class="auth-switch" id="switch-to-signup">Sign up for free</span>
            </p>
          </form>

          <p id="auth-error" class="auth-error hidden"></p>
        </div>

        <div class="auth-right">
          <div class="auth-quote">
            ‚ÄúMy son and I learned more in these 6 months than he did in 2 years of business electives.
            And we actually built something real.‚Äù
          </div>
          <div class="auth-quote-author">
            David M.<br />
            Silicon Valley Sprouts Alum
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CONFIG + APP JS -->
  <script>
    window.APP_CONFIG = {
      firebaseConfig: {
        apiKey: "AIzaSyAOWfR3KGG-ouX6Whl27lApxHMukZ2G9UE",
        authDomain: "svsprouts-a1350.firebaseapp.com",
        projectId: "svsprouts-a1350",
        storageBucket: "svsprouts-a1350.firebasestorage.app",
        messagingSenderId: "575688818236",
        appId: "1:575688818236:web:648234b064245b9bf10d39",
        measurementId: "G-6PTY3QCH6H"
      },
      stripePublishableKey: "YOUR_STRIPE_PUBLISHABLE_KEY"
    };
  </script>
  <script src="app.js"></script>
  <script src="js/watch-challenge.js"></script>
  <!-- FEATURE: Heatmap mobile optimization -->
  <script src="js/feature-watch-heatmap-mobile.js"></script>
  <!-- FEATURE: Mobile nav sidebar -->
  <script src="js/feature-nav-mobile.js"></script>
  <!-- FEATURE: Watch challenge Firestore sync -->
  <script src="js/feature-watch-firestore.js"></script>
  <!-- FEATURE: Watch challenge videos + progress from Firestore -->
  <script src="js/feature-watch-videos.js"></script>
</body>
</html>
